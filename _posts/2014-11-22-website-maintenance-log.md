---
title: 网站维护日志
ds_thread_key: devlog-webiste
---

### 2016-01-31
添加了网站主页和博客页，之前的 LCUI 项目的主页已经转移至 lcui.c-soft.io 域名下。主页是蓝色调，LCUI主页是绿色调。之前写的开发日志整理起来很麻烦，需要按时间拆分成多个文档以方便控制日志的排列顺序，现在打算让正在更新的日志按时间递增排序，而已经更新完的日志则按时间递增排序。

### 2016-01-23
在 [DigitalOcean](https://m.do.co/c/d01d1bd79d8e) 上弄了个VPS，5美元一个月还算便宜。apt-get 安装好 nginx，改改配置，网站的文件不用从本地上传，直接用git从github仓库里下载，弄完后把 lc-soft.io 这个域名绑定到VPS的IP上。还弄了个SSL证书，现在，网站已经支持以HTTPS方式访问了，地址栏带绿色 https 看起来蛮有B格的。多说评论框依赖的头像及相关资源不支持HTTPS访问，参考相关文档在VPS上做了反向代理后解决头像问题。

### 2016-01-20
在 gandi.net 上买了个 lc-soft.io 域名，才注意到可以用来做邮箱域名，以后可以用 leader@lc-soft.io、lc-soft@lc-soft.io、tech@lc-soft.io、boss@lc-soft.io 做邮箱地址。

### 2015-10-30
距离上次网站改动已经快1年了，卧槽，时间过得也太快了吧？现在准备修改首页，取消之前采用的`<iframe>`方式载入页面，日志改成用 markdown 语法写，日志的HTML页面交给 jekyll 生成，这样省的自己写HTML代码了。之前写的HTML版的日志，等以后有空再转成markdown版。

### 2014-12-12
像Google+、微博这样的网站，页面内容都是动态生成的，我还在用iframe实现无页面跳转的局部内容更新，与他们比起来稍显屌丝了。嘛，感觉他们的网页更像是应用程序，而不是普通页面。

### 2014-12-06
原来 compass 处理带中文字符的路径下的文件会出问题。在无中文字符的路径下创建了个软链接，这样就可以正常的使用compass watch了。


### 2014-11-30
每次测试时都会自动播放背景音乐，总是那么几首，播多了也会烦躁的，需要用到cookie，当浏览者手动暂停音乐播放时，在cookies中添加记录，以后再浏览时，就不会再自动播放背景音乐了，这种状态一直会持续到浏览者自己手动播放，或者cookie被清除。

文件的URL一直用相对路径有些麻烦，直接用绝对路径好些，但本地测试直接拖浏览器里打开的话，根目录不是网站的文件存放的目录，文件定位会出问题，最后决定装个Apache，配置一下就OK了。

css文件是用compass工具生成的，在windows上装了Ruby，然后用gem装了sass和compass，但compass总是有些小问题，蛋疼。

页面在`<iframe>`中显示的话，需要对页面中原本的链接进行调整，都改为 !#/url 形式，并绑定click事件，在链接被点击时做些处理，这主要针对要在当前页面打开链接的`<a>`元素。

网站在GitHub.com上有时访问速度慢，影响背景音乐的播放，还好在GitCafe.com也弄了个网站副本，毕竟服务器是在国内，访问速度比GitHub快点。

点击浏览器的后退按钮，`<iframe>`中的页面虽然返回到上个页面了，但#!/后面的内容没变化，这个需要做些处理。


### 2014-11-22
没事换换口味，想重做项目页面，以前整的页面有些马虎，毕竟那时对html、css、javascript比较生疏。

新首页得有内容，那就把项目动态搬上去，感觉GitHub上那个日历图不错，要模拟实现也不难，生成7行52列正方形，根据数据为各个正方形填充相应的颜色，而数据可以用GitHub给的API来获取，日历上的月份和周几还是用英文的好些，用一月、二月、周一、周二这样的字样感觉有些奇怪。GitHub的API只提供项目在近52周的活动情况，少了一周，在日历中不能看到去年的今天。

现在有个需求：能播放背景音乐，并且在在浏览其它页面时不会被终止，要实现这个功能就得让播放器所在页面不变，其它页面则在`<iframe>`中打开。音乐播放可以用audioJS实现，看它项目主页提供的示例页面的代码就知道大致怎么用了。

但有个问题，在F5刷新当前页面后，`<iframe>`中的网页会还原为首页，得需要一个记录，能够定位iframe中要打开的网页，直接修改 location.href 记录的地址的话，会导致当前页面被刷新。可以用 #，当链接是 #url 这样的格式时，虽然地址栏的内容变了，但当前页面不会刷新。

查找了相关内容，感觉用 #!/ 这样更好些，例如：www.test.com/#!/help.html，index.html在地址中可以省去。

功能实现上，用JavaScript只需要读取 #!/ 后面的路径，并在`<iframe>`中打开，顶部导航栏中的链接需要改成 /#!/url 形式。

为了让`<iframe>`的高度和它里面的页面一样，需要在每次页面切换时同步页面高度，用Chrome浏览器测试会有跨域问题，改用了FireFox浏览器，但在找不到页面、浏览文件列表时还是有跨域问题，因为这两个页面是浏览器内部提供的，没权限访问。

index.html 中已经显示了页首（顶部导航栏）和页尾，`<iframe>`中的页面不需要重复显示，需要让这些页面能够判断自己是否显示在`<iframe>`中。

考虑到有些人在使用搜索引擎时，会搜索到项目网站中的某个页面并直接访问，由于不是从主页中访问的，因此这些页面的页首和页尾需要显示，但背景音乐可不用支持页面切换无中断，因为直接访问这个页面的人很少会继续浏览其它页面，就算要访问其它页面，也会有概率先点导航栏链接。

考虑到浏览器兼容问题（IE9以下），为了保证页面具有一定可读性，有内容显示，需要改为静态模式，不使用`<iframe>`，这样就和浏览普通的网页一样，虽然背景音乐的存在感降低了。



